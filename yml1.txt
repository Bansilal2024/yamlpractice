---
- name: setup Nfs server
  hosts: 10.0.3.169
  gather_facts: yes
  become: yes
  tasks: 
  - apt:
     name: nfs-kernel-server
	 state: present
	 update_cache: yes
	when: ansible_distribution=="Ubuntu"
  - yum:
     name: nfs-utils
	 state: present
	 update_cache: yes
	when: ansible_distribution=="RedHat"  
  - name: Creating a file
    file:
     path: /tmp/share
     state: directory
  - name: add line into configure file
    lineinfile:
     path: /etc/exports
     line: /tmp/share  *(rw,sync,no_subtree_check)
  - name: restarting the service
    service:
     name: nfs-kernel-server
     state: restarted
- name: setup nfs client software
  hosts: 10.0.3.8,10.0.3.116
  become: yes
  tasks:
  - apt:
     name: nfs-common
	 state: present
	when: ansible_distribution=="Ubuntu"
  - yum:
     name: nfs-utils 
	 state: present
	when: ansible_distribution=="Redhat"
  - name: Creating a directoy
    file:
     path: /tmp/feb22
     state: directory
  - mount
     path: /tmp/feb22
     src: 10.0.3.169:/tmp/share 
     state: mounted	 
  
     